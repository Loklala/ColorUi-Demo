(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-about-editinfo"],{4164:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,".hide[data-v-e1ec9bf8]{display:none}.sexpicker[data-v-e1ec9bf8]{width:90%}.picker[data-v-e1ec9bf8]{text-align:left}.btn[data-v-e1ec9bf8]{background:-webkit-gradient(linear,left top,right top,from(#3396e9),to(#1ab7b9));background:-webkit-linear-gradient(left,#3396e9,#1ab7b9);background:-o-linear-gradient(left,#3396e9,#1ab7b9);background:linear-gradient(90deg,#3396e9,#1ab7b9);margin-top:%?50?%;width:96%;margin-left:2%}.page[data-v-e1ec9bf8]{height:100Vh;width:100vw}.title[data-v-e1ec9bf8]{color:#444;text-align:left;width:%?120?%}.btn-bg[data-v-e1ec9bf8]{background:#fff;color:#007aff}.menu[data-v-e1ec9bf8]{margin-top:%?10?%}",""])},"7acf":function(e,t,a){"use strict";var n=a("b835"),i=a.n(n);i.a},"7cd1":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(a("803e")),i=c(a("893b")),s=c(a("df04"));c(a("1bcd"));function c(e){return e&&e.__esModule?e:{default:e}}var r=a("55f6"),o={components:{mpvuePicker:i.default,mpvueCityPicker:s.default},data:function(){return{address:"",pickerText:"北京市-市辖区-东城区",email:"",sexPickerText:"",sexPickerVal:"",nickName:"",qq:"",StatusBar:this.StatusBar,CustomBar:this.CustomBar,menuBorder:!1,menuArrow:!1,menuCard:!1,themeColor:"#007AFF",cityPickerValueDefault:[0,0,0],pickerSingleArray:[{label:"男",value:0},{label:"女",value:1}],mode:"",deepLength:1,pickerValueDefault:[0],pickerValueArray:[],token:""}},onLoad:function(){var e=this,t=uni.getStorageSync("agentInfo");t&&(this.token=t.token),uni.request({url:n.default.websiteUrl+"/agent/agent/ajax-agent-info",header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",dataType:"json",cache:!1,data:{token:this.token},success:function(t){e.list=t;var a=e.list.data;200==a.code?(e.nickName=a.data.nickname,"0"==a.data.sex?(e.sexPickerText="男",e.sexPickerVal=0):"1"==a.data.sex&&(e.sexPickerText="女",e.sexPickerVal=1),null==a.data.email?e.email="":e.email=a.data.email,null==a.data.qq?e.qq="":e.qq=a.data.qq,null==a.data.area?e.area="":e.area=a.data.area,null==a.data.address?e.address="":e.address=a.data.address):-200==a.code&&uni.showModal({showCancel:!1,content:"用户信息已失效，请重新登陆",success:function(e){e.confirm&&uni.redirectTo({url:"../login/login"})}})},fail:function(){uni.showToast({icon:"none",title:"网络异常,请稍后重试"})},complete:function(){}})},methods:{navTo:function(){uni.redirectTo({url:"info"})},PickerChange:function(){this.pickerValueArray=this.pickerSingleArray,this.mode="selector",this.deepLength=1,this.pickerValueDefault=[0],this.$refs.mpvuePicker.show()},showThreePicker:function(){console.log("000000"),this.$refs.mpvueCityPicker.show()},onBackPress:function(){return this.$refs.mpvuePicker.showPicker?(this.$refs.mpvuePicker.pickerCancel(),!0):this.$refs.mpvueCityPicker.showPicker?(this.$refs.mpvueCityPicker.pickerCancel(),!0):void 0},onUnload:function(){this.$refs.mpvuePicker.showPicker&&this.$refs.mpvuePicker.pickerCancel(),this.$refs.mpvueCityPicker.showPicker&&this.$refs.mpvueCityPicker.pickerCancel()},onConfirm:function(e){this.pickerText=e.label},onSexConfirm:function(e){this.sexPickerText=e.label,this.sexPickerVal=e.value[0]},formSubmit:function(e){var t=this,a=[{name:"nickname",checkType:"string",checkRule:"0,20",errorMsg:"昵称应为0-20个字符之内"},{name:"gender",checkType:"in",checkRule:"男,女",errorMsg:"请选择性别"},{name:"sexval",checkType:"in",checkRule:"0,1",errorMsg:""},{name:"email",checkType:"email",checkRule:"",errorMsg:"邮箱格式不正确"},{name:"qq",checkType:"reg",checkRule:"^[1-9]{4,11}$",errorMsg:"QQ号码不正确"}],i=e.detail.value,s=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(i.email.length>0&&!s.test(i.email))return uni.showToast({icon:"none",title:"邮箱格式不正确"}),!1;if(i.qq.length>0){var c=/^[1-9]\d{4,10}$/;if(!c.test(i.qq))return uni.showToast({icon:"none",title:"qq号码格式不正确"}),!1}var o=r.check(i,a);o?uni.request({url:n.default.websiteUrl+"/agent/agent/ajax-up-info",header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",dataType:"json",cache:!1,data:{token:this.token,nickname:i.nickname,sex:i.sexval,qq:i.qq,email:i.email,area:this.pickerText,address:i.address},success:function(e){t.list=e;var a=t.list.data;200==a.code?(uni.showToast({title:"修改成功!",icon:"none"}),setTimeout(function(){uni.redirectTo({url:"../about/info"})},2e3)):-200==a.code&&uni.showModal({showCancel:!1,content:"用户信息已失效，请重新登陆",success:function(e){e.confirm&&uni.redirectTo({url:"../login/login"})}})},fail:function(){uni.showToast({icon:"none",title:"网络异常,请稍后重试"})},complete:function(){}}):uni.showToast({title:r.error,icon:"none"})},formReset:function(e){this.chosen=""}}};t.default=o},"9e0d":function(e,t,a){"use strict";a.r(t);var n=a("7cd1"),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t["default"]=i.a},b835:function(e,t,a){var n=a("4164");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("6daefe08",n,!0,{sourceMap:!1,shadowMode:!1})},cde8:function(e,t,a){"use strict";a.r(t);var n=a("d8d6"),i=a("9e0d");for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);a("7acf");var c=a("2877"),r=Object(c["a"])(i["default"],n["a"],n["b"],!1,null,"e1ec9bf8",null);t["default"]=r.exports},d8d6:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"cu-bar bg-gradual-blue search",style:[{height:e.CustomBar+"px"}]},[a("v-uni-view",{staticClass:"action",on:{click:function(t){t=e.$handleEvent(t),e.navTo()}}},[a("v-uni-text",{staticClass:"cuIcon-back"})],1),a("v-uni-view",{staticClass:"content"},[e._v("修改个人信息")]),a("v-uni-view",{staticClass:"action"})],1),a("v-uni-form",{on:{submit:function(t){t=e.$handleEvent(t),e.formSubmit(t)},reset:function(t){t=e.$handleEvent(t),e.formReset(t)}}},[a("v-uni-view",{staticClass:"cu-list menu",class:[e.menuBorder?"sm-border":"",e.menuCard?"card-menu margin-top":""]},[a("v-uni-view",{staticClass:"cu-item",class:e.menuArrow?"arrow":""},[a("v-uni-text",{staticClass:"title"},[e._v("昵 称：")]),a("v-uni-text",{staticClass:" content"},[a("v-uni-input",{staticClass:"text-black",attrs:{type:"text",name:"nickname",value:e.nickName,maxlength:"40"}})],1)],1),a("v-uni-view",{staticClass:"cu-item",class:"arrow",on:{click:function(t){t=e.$handleEvent(t),e.PickerChange()}}},[a("v-uni-text",{staticClass:"title"},[e._v("性 别：")]),a("v-uni-text",{staticClass:" content"},[a("v-uni-text",{staticClass:"text-black",attrs:{name:"gender"}},[e._v(e._s(e.sexPickerText))]),a("v-uni-input",{staticClass:"hide",attrs:{type:"text",name:"gender",value:e.sexPickerText,maxlength:"40"}}),a("v-uni-input",{staticClass:"hide",attrs:{type:"text",name:"sexval",value:e.sexPickerVal,maxlength:"40"}})],1)],1),a("v-uni-view",{staticClass:"cu-item",class:e.menuArrow?"arrow":""},[a("v-uni-text",{staticClass:"title"},[e._v("邮 箱：")]),a("v-uni-text",{staticClass:" content"},[a("v-uni-input",{staticClass:"text-black",attrs:{type:"text",placeholder:"请填写邮箱号",name:"email",value:e.email,maxlength:"40"}})],1)],1),a("v-uni-view",{staticClass:"cu-item",class:e.menuArrow?"arrow":""},[a("v-uni-text",{staticClass:"title"},[e._v("Q Q ：")]),a("v-uni-text",{staticClass:" content"},[a("v-uni-input",{staticClass:"text-black",attrs:{type:"number",placeholder:"请填写QQ号",name:"qq",value:e.qq,maxlength:"11"}})],1)],1),a("v-uni-view",{staticClass:"cu-item",class:"arrow",on:{click:function(t){t=e.$handleEvent(t),e.showThreePicker()}}},[a("v-uni-text",{staticClass:"title"},[e._v("地 区：")]),a("v-uni-text",{staticClass:" content"},[a("v-uni-text",{staticClass:"text-black"},[e._v(e._s(e.pickerText))]),a("v-uni-input",{staticClass:"hide",attrs:{type:"text",name:"area",value:e.pickerText,maxlength:"40"}})],1)],1),a("v-uni-view",{staticClass:"cu-item",class:e.menuArrow?"arrow":""},[a("v-uni-text",{staticClass:"title"},[e._v("地 址：")]),a("v-uni-text",{staticClass:" content"},[a("v-uni-input",{staticClass:"text-black",attrs:{type:"text",name:"address",value:e.address,placeholder:"请填写街/区/号",maxlength:"100"}})],1),a("v-uni-text",{staticClass:"cuIcon-locationfill text-orange"})],1),a("v-uni-view",[a("v-uni-button",{staticClass:"cu-btn bg-blue margin-tb-sm lg btn",attrs:{formType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1),a("mpvue-picker",{ref:"mpvuePicker",attrs:{themeColor:e.themeColor,mode:e.mode,deepLength:e.deepLength,pickerValueDefault:e.pickerValueDefault,pickerValueArray:e.pickerValueArray},on:{onConfirm:function(t){t=e.$handleEvent(t),e.onSexConfirm(t)},onCancel:function(t){t=e.$handleEvent(t),e.onSexConfirm(t)}}}),a("mpvue-city-picker",{ref:"mpvueCityPicker",attrs:{themeColor:e.themeColor,pickerValueDefault:e.cityPickerValueDefault},on:{onCancel:function(t){t=e.$handleEvent(t),e.onCancel(t)},onConfirm:function(t){t=e.$handleEvent(t),e.onConfirm(t)}}})],1)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})}}]);